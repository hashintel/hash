//@ run: pass
//@ description: Graph read filter creates GraphReadBodyFilterEnv edge for captured environment
// Filter closures capture environment that becomes a dependency
[
  "let",
  "threshold",
  ["input", "threshold", "Integer"],
  [
    "::graph::tail::collect",
    [
      "::graph::body::filter",
      [
        "::graph::head::entities",
        ["input", "axis", "::graph::QueryTemporalAxes"]
      ],
      [
        "fn",
        { "#tuple": [] },
        { "#struct": { "vertex": "_" } },
        "_",
        ["<=", "threshold", { "#literal": 10 }]
      ]
    ]
  ]
]
