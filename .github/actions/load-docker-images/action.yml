name: Load docker images
description: "Load docker images"
inputs:
  hash-graph:
    description: "Load hash-graph image"
    required: false
    default: "false"
  hash-ai-worker-ts:
    description: "Build hash-ai-worker-ts image"
    required: false
    default: "false"
  hash-ai-worker-py:
    description: "Build hash-ai-worker-py image"
    required: false
    default: "false"
  hash-integration-worker:
    description: "Build hash-integration-worker image"
    required: false
    default: "false"

runs:
  using: "composite"
  steps:
    - name: Set up Docker Buildx
      uses: docker/setup-buildx-action@885d1462b80bc1c1c7f0b00334ad271f09369c55 # v2.10.0

    - name: Download hash-graph image
      if: inputs.hash-graph == 'true'
      uses: actions/download-artifact@9bc31d5ccc31df68ecc42ccf4149144866c47d8a # v3.0.2
      with:
        name: hash-graph
        path: /tmp

    - name: Load hash-graph image
      if: inputs.hash-graph == 'true'
      shell: bash
      run: |
        docker load --input /tmp/hash-graph.tar
        docker image ls -a

    - name: Download hash-ai-worker-ts image
      if: inputs.hash-ai-worker-ts == 'true'
      uses: actions/download-artifact@9bc31d5ccc31df68ecc42ccf4149144866c47d8a # v3.0.2
      with:
        name: hash-ai-worker-ts
        path: /tmp

    - name: Load hash-ai-worker-ts image
      if: inputs.hash-ai-worker-ts == 'true'
      shell: bash
      run: |
        docker load --input /tmp/hash-ai-worker-ts.tar
        docker image ls -a

    - name: Download hash-ai-worker-py image
      if: inputs.hash-ai-worker-py == 'true'
      uses: actions/download-artifact@9bc31d5ccc31df68ecc42ccf4149144866c47d8a # v3.0.2
      with:
        name: hash-ai-worker-py
        path: /tmp

    - name: Load hash-ai-worker-py image
      if: inputs.hash-ai-worker-py == 'true'
      shell: bash
      run: |
        docker load --input /tmp/hash-ai-worker-py.tar
        docker image ls -a

    - name: Download hash-integration-worker image
      if: inputs.hash-integration-worker == 'true'
      uses: actions/download-artifact@9bc31d5ccc31df68ecc42ccf4149144866c47d8a # v3.0.2
      with:
        name: hash-integration-worker
        path: /tmp

    - name: Load hash-integration-worker image
      if: inputs.hash-integration-worker == 'true'
      shell: bash
      run: |
        docker load --input /tmp/hash-integration-worker.tar
        docker image ls -a
