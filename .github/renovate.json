{
  "$schema": "https://docs.renovatebot.com/renovate-schema.json",
  "extends": ["config:base"],

  "automerge": true,
  "dependencyDashboard": true,
  "dependencyDashboardApproval": true,
  "ignorePaths": ["apps/engine/**"],
  "postUpdateOptions": ["yarnDedupeFewer"],
  "rangeStrategy": "bump",
  "rebaseWhen": "conflicted",
  "packageRules": [
    {
      "enabled": true,
      "groupName": "ESLint",
      "matchManagers": ["npm"],
      "matchPackagePatterns": [
        "^@types/eslint",
        "^@typescript-eslint/",
        "^eslint-",
        "^eslint$"
      ]
    },
    {
      "enabled": true,
      "groupName": "Jest",
      "matchManagers": ["npm"],
      "matchPackagePatterns": ["^@types/jest$", "^jest", "^ts-jest$", "^jest-"]
    },
    {
      "enabled": true,
      "groupName": "Playwright",
      "matchManagers": ["npm"],
      "matchPackagePatterns": ["^@playwright/", "^playwright$", "^playwright-"]
    },
    {
      "enabled": true,
      "groupName": "ProseMirror",
      "matchManagers": ["npm"],
      "matchPackagePatterns": ["^prosemirror-"]
    },
    {
      "enabled": true,
      "groupName": "Sentry",
      "matchManagers": ["npm"],
      "matchPackagePatterns": ["^@sentry/"]
    },
    {
      "matchManagers": ["regex"],
      "matchDepNames": ["rust"],
      "matchDepPatterns": ["(R|r)ust(-.+)?"],
      "separateMajorMinor": false,
      "fetchReleaseNotes": false
    },
    {
      "matchManagers": ["regex"],
      "matchDepNames": ["rust"],
      "matchDepPatterns": ["(R|r)ust(-.+)?"],
      "matchPaths": ["**/error-stack/**"],
      "groupName": "error-stack"
    },
    {
      "matchManagers": ["regex"],
      "matchDepNames": ["rust"],
      "matchDepPatterns": ["(R|r)ust(-.+)?"],
      "matchPaths": ["**/deer/**"],
      "groupName": "deer"
    },
    {
      "matchManagers": ["regex"],
      "matchDepNames": ["rust"],
      "matchDepPatterns": ["(R|r)ust(-.+)?"],
      "matchPaths": ["**/graph/**"],
      "groupName": "graph"
    }
  ],
  "regexManagers": [
    {
      "fileMatch": ["(^|/)rust-toolchain\\.toml?$"],
      "matchStrings": [
        "channel\\s*=\\s*\"nightly-(?<currentValue>\\d+-\\d+-\\d+)\""
      ],
      "depNameTemplate": "rust",
      "packageNameTemplate": "rust-lang/rust-analyzer",
      "datasourceTemplate": "github-releases",
      "versioningTemplate": "regex:(?<major>\\d+)-(?<minor>\\d+)-(?<patch>\\d+)"
    },
    {
      "fileMatch": ["(^|/)README\\.md?$"],
      "matchStrings": [
        "\\[!\\[rust-version]\\(https://img\\.shields\\.io/badge/(?<depName>Rust-\\d+\\.\\d+\\.\\d+)/nightly--(?<currentValue>\\d+--\\d+--\\d+)-blue\\)]\\[rust-version]"
      ],
      "packageNameTemplate": "rust-lang/rust-analyzer",
      "datasourceTemplate": "github-releases",
      "versioningTemplate": "regex:(?<major>\\d+)-?-(?<minor>\\d+)-?-(?<patch>\\d+)",
      "autoReplaceStringTemplate": "[![rust-version](https://img.shields.io/badge/{{depName}}/nightly--{{replace '-' '--' newValue}}-blue)][rust-version]"
    }
  ]
}
