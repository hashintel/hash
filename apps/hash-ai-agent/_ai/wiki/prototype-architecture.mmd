flowchart LR
    subgraph Planning Phase
        G[Research Goal] --> PA[Planner Agent]
        PA --> P[Plan]
        P --> V{Validate & Score}
        V -->|fail| FB[Compile Feedback]
        FB --> PA
        V -->|pass| C[Compiler]
    end

    subgraph Execution Phase
        C --> MW[Mastra Workflow]
        MW --> EX[Execute Steps]
        EX --> EV[Stream Events]
    end
